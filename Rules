#!/usr/bin/env ruby

# General
preprocess do
  items.delete_if { |item| item[:publish] == false } # allow to make unpublished articles
  copy_static # add assets to the output directory
  create_tag_pages # create tag pages
end


# RSS feed
compile '/blog/feed/' do
  filter :erb
end

route '/blog/feed/' do
  '/blog/feed.xml'
end


# Sitemap
compile '/sitemap/' do
  filter :erb
end

route '/sitemap/' do
  '/sitemap.xml'
end


# Blog
compile '/blog/' do
  filter :erb  
  layout 'blog'
end

compile '/blog/tags/*' do
  filter :erb  
  layout 'blog'
end

compile '/blog/*' do
  layout 'blog_article'
end


# About
compile '/about/' do
  filter :erb
  layout 'two_columns'
end


# Features
compile '/features/' do
  filter :erb
  layout 'two_columns'
end


# Collaborations
compile '/collaborations/' do
  filter :erb
  layout 'default'
end


# Terms
compile '/tos/' do
  layout 'two_columns'
end

compile '/privacy/' do
  layout 'two_columns'
end


# General 
compile '*' do
  filter :erb
  layout 'default'
end

route '*' do
  item.identifier + 'index.html'
end

layout '*', :erb
