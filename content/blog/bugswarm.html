--- 
title: "BUGswarm"
subtitle: "Realtime Invitation #IoT"
author: <a href="http://twitter.com/andreareginato">Lelylan Chief</a>
created_at: 2012/09/05
tags: [iot]
publish: true
kind: article
menu: blog
excerpt: "BUGswarm is a cloud-based platform created by Bug Labs, used to
acquire data from and to control embedded devices. The idea behind it is based on
four concepts: resources, swarms, invitations and participations. Trying to simplify
you have one or more resources that produce and consume data that are grouped into
swarms..."
---

<div class="article">

  <br/>

  <ul class="media-grid">
    <li>
    <a href="https://developer.bugswarm.net/"><img class="thumbnail" src="/images/blog/bugswarm/header.png" alt="BUGswarm"></a>
    </li>
  </ul>

  <p>
  <a href="http://developer.bugswarm.net">BUGswarm</a> is a cloud-based platform created by
  <a href="http://buglabs.net">Bug Labs</a>, used to acquire data from and to control
  embedded devices. The idea behind it is based on four concepts: resources, swarms,
  invitations and participations.
  </p>

  <p>Trying to simplify you have one or more
  <em>resources</em> that produce and consume data. Those resources are grouped into
  <em>swarms</em>. A resource could be your mobile phone and the swarm could
  be a group that puts together all mobile devices you own. Once a resource is added to
  a swarm, you can open an HTTP stream connection (<em>participation</em>)
  and have realtime information about the exchanged messages. Speaking always about mobile
  phones, this means that we can have realtime information, for instance, about their
  locations or accelerations.
  </p>

  <p>
  Last, resources can belong to different
  swarms. This means that you can invite other resources to be part of your swarm and vice
  versa, you can accept invitation for your resources to be part of somebody else swarms.
  </p>

  <h2>BUGswarm API</h2>

  <p>
  It can be a little tricky to get started with BUGswarm. Follows a detailed description
  of the main concepts behind it together with some examples showing how they are implemented.
  </p>

  <h3><a href="http://developer.bugswarm.net/restful_api_keys.html">API Keys</a></h3>

  <p>
  The API Key lets you create a valid key to access BUGswarms services. To create a
  valid key you have to basic authenticate with your <code>username:password</code>.
  You should also choose if the key is used to access the <em>participation</em> services (which includes
  participation API), the <em>configuration</em> services (which includes resource, swarms and
  invitation API) or both.
  </p>

  <p>
  Sample request creating a key to access to the configuration services.
  </p>

<pre>
curl -X POST --user "username:password" http://api.bugswarm.net/keys/configuration
</pre>

  <p>
  Sample response.
  </p>

<pre>
[
  {
    "created_at": "2011-10-21T15:37:35.636Z", 
    "key": "b8c2382d0fd9123f3d0ccc760afa03854c652fdb", 
    "status": "active", 
    "type": "configuration", 
    "user_id": "username"
  }
]
</pre>

  <h3><a href="http://developer.bugswarm.net/restful_resources.html">Resources</a></h3>

  <p>
  A resource is an application or device that is configured to <em>produce</em>
  or <em>consume</em> data. A resource is a physical device, such as a smartphone
  or Arduino, as well as a web or mobile app. Anything than can communicate through
  HTTP can be configured to join a swarm and being producing and consuming data.
  Here a sample request creating a resource representing a smartphone.
  </p>

<pre>
curl -X POST http://api.bugswarm.net/resources
     --header "x-bugswarmapikey: &lt;api-key&gt;"
     --header "content-type: application/json"
     -d '{
           "name": "My resource",
            "machine_type": "smartphone",
            "description": "HTC Dream",
            "position": { "longitude": 0, "latitude": 0 }
         }'
</pre>


  <h3><a href="http://developer.bugswarm.net/restful_swarms.html">Swarms</a></h3>

  <p>
  A swarm is a collection of resources. Once a swarm is created, users can invite another
  user's resources to become its member or can accept invitations to share a resource with
  somebody else swarms. The owner of the swarm can control what level of access
  (<em>production</em> and <em>consumption</em>) that each resource in the swarm has.
  </p>

  <p>
  Sample request creating a swarm representing my mobile phones. When including a
  resource simply specify its id and its level of access (the resource must be
  previously created).
  </p>

<pre>
curl -X POST http://api.bugswarm.net/swarms
     --header "x-bugswarmapikey: &lt;api-key&gt;" 
     --header "content-type: application/json"
     -d '{
          "name": "My smartphones",
          "description": "I'm owesome!",
          "public": false,
          "resources": [{ 
            "resource_id": "&lt;resource-id&gt;",
            "resource_type": "consumer"
          }]
        }'
</pre>

  <h3><a href="http://developer.bugswarm.net/restful_invitations.html">Invitations</a></h3>

  <p>
  An invitation provides a social presence by inviting another user's resources to
  join your swarms, sharing the production and consumption of data. A user can freely
  accept or reject invitations from other users.
  </p>

  <p>
  Sample request where a resource with id <resource-id> is shared as data producer
  with the user <username>.
  </p>

<pre>
curl -X POST http://api.bugswarm.net/swarms/&lt;swarm-id&gt;/invitations
     --header "x-bugswarmapikey: &lt;api-key&gt;" 
     --header "content-type: application/json"
     -d '{
    "description": "I want to share my HTC Dream data with you Bob",
      "to": "&lf;username&gt;",
      "resource_id": "&lt;resource-id&gt;",
      "resource_type": "producer"
  }
</pre>

  <h3><a href="http://developer.bugswarm.net/participation_api.html">Partecipation</a></h3>

  <p>
  Once connected, resources may produce or consume data. Throughout the
  participation API the BUGswarm platform let you exchange messages, presence
  notifications and error messages. The Participation API makes use of HTTP
  streaming, meaning that once a connection has been opened, bidirectional
  communication between the resource and the swarm may continue until the
  connection is closed.
  </p>

  <p>
  Sample request opening a stream between the swarm &lt;swarm-id&gt; and the resource
  <resource-id>.
  </p>

<pre>
curl -X POST 'http://api.bugswarm.net/stream?
             swarm_id=&lt;swarm-id&gt;&resource_id=&lt;resource-id&gt;'
</pre>

  <p>
  Once a connection has has been successfully opened you can send and receive messages.
  Here a sample request sending the acceleration value of a smartphone.
  </p>

<pre>
{
  "message":
  {
    "to": [ { "swarm": "&lt;swarm-id&gt;", "resource": "&lt;resource-ide&gt;" } ],
    "payload": { "acceleration" : 0.03242 }
   }
}
</pre>

  <h3><a href="http://developer.bugswarm.net/participation_api.html">Connectors (Hardware)</a></h3>

  <p>
  A connector is a client-side device-specific application that lets your
  embedded devices to participate on BUGswarm being able to produce and
  consume data. In other words a connector uses the participation API to
  exchange a sequence of messages that lets your swarms know the device status.
  <a href="http://developer.bugswarm.net/hardware.html">Learn more</a>.
  <p>


  <h2>Conclusions</h2>

  <p>
  The documentation is clear and you can find <a href="http://developer.bugswarm.net/tutorial.html">step by step tutorials</a>
  that give to a developer all needed information to get started. The API is simple and follows
  pretty well the RESTful architecture. To easily access to the API, BUGswarm offers a
  <a href="https://github.com/buglabs/bugswarm-tools">command line</a> written in Python, 
  as well as a <a href="https://github.com/buglabs/bugswarm-js">Javascript library</a>.
  The key concept that differentiate this service from all others, in our opinion, is the
  invitation one. It easily let you share resources with other users and as far as we know, no
  other service does this.
  </p>

  <p>
  In the other side we were expecting more examples on real case scenarios.
  The communication with real hardware is not clear. A simple example on how to integrate
  Arduino would be enough to improve this part.
  The authorization system does not provide a flexible mechanism. As far as we could see
  there is also no way to revoke an API key once generated.
  </p>

  <p>
  As final result, BUGswarm looks like the cool kid that uses cutting edge technologies and
  that follow the realtime trend characterizing the web nowadays. Unluckily it misses to target
  the real needs and the physical world. We hope to see soon more examples about.
  </p>

</div>
